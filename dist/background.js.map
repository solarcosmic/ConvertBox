{"version":3,"file":"background.js","mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://convertbox/./src/background.js"],"sourcesContent":["var last_info = null;\nvar last_tab = null;\nfunction convertImageChecker(info, tab, corsProxy = false) {\n    last_info = info;\n    last_tab = tab;\n    try {\n        if (info[\"mediaType\"] == \"image\") {\n            const menuItemSplit = info[\"menuItemId\"].toLowerCase().split(\"_\");\n            chrome.tabs.sendMessage(tab.id, {\n                action: \"convertImage\",\n                srcUrl: corsProxy ? \"https://corsproxy.io/?url=\" + info[\"srcUrl\"] : info[\"srcUrl\"],\n                format: menuItemSplit[1]\n            });\n        } else if (info[\"menuItemId\"] == \"convertHTMLToMarkdown\") {\n            chrome.tabs.sendMessage(tab.id, {\n                action: \"convertHTMLToMarkdown\"\n            });\n        } else if (info[\"menuItemId\"] == \"convertQRCode\") {\n            chrome.tabs.sendMessage(tab.id, {\n                action: \"convertQRCode\",\n                selectionText: info[\"selectionText\"]\n            });\n        } else if (info[\"menuItemId\"] == \"convertHexToRGB\") {\n            chrome.tabs.sendMessage(tab.id, {\n                action: \"convertHexToRGB\",\n                selectionText: info[\"selectionText\"]\n            });\n        }\n    } catch (error) {\n        console.error(error);\n    }\n}\n\nchrome.runtime.onMessage.addListener((request, sender, sendResponse) => {\n    if (request.action == \"downloadImage\") {\n        chrome.downloads.download({\n            url: request.url,\n            filename: request.filename,\n            saveAs: true,\n        });\n    } else if (request.action == \"downloadFromUrl\") {\n        chrome.downloads.download({\n            url: request.url,\n            filename: request.filename,\n            saveAs: true,\n        });\n    } else if (request.action == \"reconvertImageUsingCORSProxy\") {\n        if (last_info && last_tab) {\n            convertImageChecker(last_info, last_tab, true);\n        }\n    }\n});\n\nchrome.runtime.onInstalled.addListener(() => {\n    // Image Conversion\n    chrome.contextMenus.create({\n        id: \"convertImage\",\n        title: \"Convert Image\",\n        contexts: [\"image\"]\n    });\n    const image_list = {\n        \"JPEG\": \"Joint Photographic Expert Group Image\",\n        \"PNG\": \"Portable Network Graphics\",\n        \"WebP\": \"Web Picture Format\",\n        \"ICO\": \"Microsoft Icon\",\n        \"TIFF\": \"Tagged Image File Format\",\n        \"BMP\": \"Bitmap Format\",\n    }\n    for (const format in image_list) {\n        chrome.contextMenus.create({\n            id: \"convertImage_\" + format.toLowerCase(),\n            title: format + \" (\" + image_list[format] + \")\",\n            contexts: [\"image\"],\n            parentId: \"convertImage\",\n        });\n    }\n    // Page to Markdown, QR Code, Hex to RGB\n    chrome.contextMenus.create({\n        id: \"convertHTMLToMarkdown\",\n        title: \"Convert Page (HTML) to Markdown\",\n        contexts: [\"page\"]\n    });\n    chrome.contextMenus.create({\n        id: \"convertQRCode\",\n        title: \"Convert Selected Text to QR Code\",\n        contexts: [\"selection\"]\n    });\n    chrome.contextMenus.create({\n        id: \"convertHexToRGB\",\n        title: \"Convert HEX to RGB (Selection, Clipboard)\",\n        contexts: [\"selection\"]\n    });\n    chrome.contextMenus.onClicked.addListener(convertImageChecker)\n});"],"names":[],"sourceRoot":""}